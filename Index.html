<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„Ø¹Ø¨Ø© Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</title>
  <style>
    body {
      font-family: Tahoma;
      background-color: #f0f0f0;
      text-align: center;
      padding: 50px;
    }
    h1 {
      color: #333;
    }
    button {
      font-size: 20px;
      margin: 10px;
      padding: 10px 30px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>ğŸ® Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</h1>
  <p>Ø§Ø®ØªØ± Ù„Ø¹Ø¨ØªÙƒ:</p>

  <button onclick="selectChoice('rock')">âœŠ Ø­Ø¬Ø±</button>
  <button onclick="selectChoice('paper')">âœ‹ ÙˆØ±Ù‚Ø©</button>
  <button onclick="selectChoice('scissors')">âœŒï¸ Ù…Ù‚Øµ</button>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBVuIX6g7TqLtfWo", // â† Ù…ÙØªØ§Ø­Ùƒ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©
      authDomain: "rps-web-b8566.firebaseapp.com",
      databaseURL: "https://rps-web-b8566-default-rtdb.firebaseio.com",
      projectId: "rps-web-b8566",
      storageBucket: "rps-web-b8566.appspot.com",
      messagingSenderId: "219855653424",
      appId: "1:219855653424:web:7cd8007f6565c38d2bbf5"
    };

    // ØªØ´ØºÙŠÙ„ Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Ø§Ù„Ù„Ø§Ø¹Ø¨
    let playerId = prompt("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ:");
    let playerRef = database.ref("players/" + playerId);

    // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø§Ø¹Ø¨
    function selectChoice(choice) {
      playerRef.set({
        choice: choice,
        timestamp: Date.now()
      });
    }

    // Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
    database.ref("players").on("value", (snapshot) => {
      const players = snapshot.val();
      if (players) {
        const keys = Object.keys(players);
        if (keys.length === 2) {
          const [p1, p2] = keys;
          const c1 = players[p1].choice;
          const c2 = players[p2].choice;

          if (c1 && c2) {
            showResult(p1, c1, p2, c2);
          }
        }
      }
    });

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
    function showResult(p1, c1, p2, c2) {
      let result = "";
      if (c1 === c2) result = "ØªØ¹Ø§Ø¯Ù„!";
      else if (
        (c1 === "rock" && c2 === "scissors") ||
        (c1 === "paper" && c2 === "rock") ||
        (c1 === "scissors" && c2 === "paper")
      ) result = `${p1} ÙØ§Ø²!`;
      else result = `${p2} ÙØ§Ø²!`;

      alert(`Ø§Ù„Ù†ØªØ§Ø¦Ø¬:\n${p1}: ${c1}\n${p2}: ${c2}\n\n${result}`);
      database.ref("players").remove(); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨
    }
  </script>
</body>
</html>